!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).IxigoSDK={})}(this,function(exports){var window$1=window,processNativePayment=function(e){try{return Promise.resolve(window$1.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window$1.IxiWebView)||!n.executeNativePayment)throw{errorCode:"NotAvailableError"};window$1.IxiWebView.executeNativePayment(e,t,r)}))}catch(e){return Promise.reject(e)}};if(void 0!==window$1&&void 0===window$1.IxiWebView&&(window$1.IxiWebView={}),!window$1.IxiWebView.quit){var _window$webkit,appInterfaceHandler=null==(_window$webkit=window$1.webkit)?void 0:_window$webkit.messageHandlers.appInterface;appInterfaceHandler&&(window$1.IxiWebView.quit=function(){appInterfaceHandler.postMessage("quit")})}function logEvent(e,t){var r,n;if(void 0===t&&(t={}),window$1.IxigoSDKAndroid&&null!=window$1.IxigoSDKAndroid.logEvent)return window$1.IxigoSDKAndroid.logEvent(JSON.stringify({name:e,properties:t})),!0;var i=null==(r=window$1.webkit)||null==(n=r.messageHandlers)?void 0:n.ixigoSDK;return i?(i.postMessage({action:"logEvent",params:{eventName:e,properties:t}}),!0):(console.warn("Unable to logEvent name="+e+" properties="+t),!1)}var analyticsServiceName="Adjust",analyticsServiceType="adjustToken";function ctEvent(e){var t,r,n,i,o,a=e.eventName,s=e.eventData;if("function"==typeof(null==(t=window)||null==(r=t.IxiWebView)?void 0:r.trackEvent)&&(window.IxiWebView.trackEvent(a,window.JSON.stringify(s)),s[analyticsServiceType]&&window.IxiWebView.trackEvent(analyticsServiceName,a,window.JSON.stringify(s))),null!=(n=window)&&null!=(i=n.webkit)&&null!=(o=i.messageHandlers)&&o.callbackHandler)try{window.webkit.messageHandlers.callbackHandler.postMessage({eventName:a,eventData:window.JSON.stringify(s)}),s[analyticsServiceType]&&window.webkit.messageHandlers.callbackHandler.postMessage({eventName:a,eventData:window.JSON.stringify(s),analyticsServiceName:analyticsServiceName})}catch(e){console.log("Error while tracking in ios from pwa")}}function quit(){var e,t;if(window$1.IxiWebView&&null!=window$1.IxiWebView.quit)return window$1.IxiWebView.quit(),!0;var r=null==(e=window$1.webkit)||null==(t=e.messageHandlers)?void 0:t.appInterface;return!!r&&(r.postMessage("quit"),!0)}function openWindow(e,t){var r,n,i,o,a,s;if(null!=(r=window$1.IxigoSDKAndroid)&&r.openWindow)return null==(s=window$1.IxigoSDKAndroid)||s.openWindow(e,JSON.stringify(t)),closeIfNeeded(t),!0;if(window$1.IxiWebView.openWindow)return window$1.IxiWebView.openWindow(e,null),closeIfNeeded(t),!0;var c=null==(n=window$1.webkit)||null==(i=n.messageHandlers)?void 0:i.ixigoSDK;if(c)return closeIfNeeded(t),c.postMessage({action:"openWindow",params:{url:e,options:t}}),!0;var l=null==(o=window$1.webkit)||null==(a=o.messageHandlers)?void 0:a.callbackHandler;if(l)return l.postMessage({openWindow:e}),closeIfNeeded(t),!0;window$1.open(e)}function closeIfNeeded(e){null!=e&&e.closeCurrentView&&quit()}var PromiseNativeBridgeImpl=/*#__PURE__*/function(){function e(){this.promiseMap=void 0,this.promiseMap={}}var t=e.prototype;return t.onSuccess=function(e,t){this.promiseMap.hasOwnProperty(e)?(this.promiseMap[e].resolve(t),delete this.promiseMap[e]):console.error("Unable to find promise with id="+e)},t.onError=function(e,t){this.promiseMap.hasOwnProperty(e)?(this.promiseMap[e].reject(t),delete this.promiseMap[e]):console.error("Unable to find promise with id="+e)},t.putPromise=function(e){var t=this,r=this.createRandomId();return new Promise(function(n,i){t.promiseMap[r]={resolve:n,reject:i},e("javascript:PromiseNativeBridge.onSuccess('"+r+"', JSON.parse('TO_REPLACE_PAYLOAD'))","javascript:PromiseNativeBridge.onError('"+r+"', JSON.parse('TO_REPLACE_PAYLOAD'))",r)})},t.createRandomId=function(){return Math.random().toString(36).substring(2,8)},e}();window.PromiseNativeBridge||(window.PromiseNativeBridge=new PromiseNativeBridgeImpl);var PromiseNativeBridge=window.PromiseNativeBridge,readSms=function(){try{return Promise.resolve(PromiseNativeBridge.putPromise(function(e,t){var r;if(null==(r=window.IxigoSDKAndroid)||!r.readSms)throw{errorCode:"NotAvailableError"};window.IxigoSDKAndroid.readSms(e,t)}))}catch(e){return Promise.reject(e)}},_window$IxigoSDKJuspa,_window$IxigoSDKJuspa2,_window$IxigoSDKJuspa3,_window$IxigoSDKJuspa4;function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}function isAvailable(){var e,t;return Boolean(null==(e=window.webkit)||null==(t=e.messageHandlers)?void 0:t.juspay)}var JuspayNativeSDK=/*#__PURE__*/function(){function JuspayNativeSDK(){this.callbackMap=void 0,this.initialized=void 0,this.callbackMap={},this.initialized=!1}var _proto=JuspayNativeSDK.prototype;return _proto.wrapPromise=function(e){var t=this;return new Promise(function(r,n){e.then(function(e){e.errorCode?n("JP_017"==e.errorCode?_extends({},e,{errorCode:"AlreadyInitializedError"}):e):(t.initialized=!0,r(e))}).catch(n)})},_proto.sanitizeResponse=function(e){return e.replace(/"otherInfo":{.*?}(,|})/g,"")},_proto.parseString=function parseString(resp){var sanitizedString=this.sanitizeResponse(resp),json={};try{json=JSON.parse(sanitizedString)}catch(e){try{json=eval(resp)}catch(e){json={}}}return json},_proto.callback=function(e){var t=JSON.parse(e),r=this.callbackMap[t.requestId];r&&new Function(r.success.replace("TO_REPLACE_PAYLOAD",JSON.stringify(t)))()},_proto.initiate=function(e){var t,r=this;if(this.initialized)throw{errorCode:"AlreadyInitializedError"};var n=null==(t=window.webkit.messageHandlers)?void 0:t.juspay;if(!n)throw{errorCode:"NotAvailableError"};return this.wrapPromise(PromiseNativeBridge.putPromise(function(t,i,o){r.callbackMap[o]={success:t,error:i},n.postMessage({action:"initiate",callback:"IxigoSDKJuspay.callback('TO_REPLACE_PAYLOAD')",payload:{requestId:o,service:"in.juspay.hyperapi",payload:e}})}))},_proto.process=function(e){var t,r=this;if(!this.initialized)throw{errorCode:"NotInitializedError"};var n=null==(t=window.webkit.messageHandlers)?void 0:t.juspay;return n?this.wrapPromise(window.PromiseNativeBridge.putPromise(function(t,i,o){r.callbackMap[o]={success:t,error:i},n.postMessage({action:"process",payload:{requestId:o,service:"in.juspay.hyperapi",payload:e}})})):Promise.reject({errorCode:"NotAvailable"})},JuspayNativeSDK}();window.IxigoSDKJuspay||(window.IxigoSDKJuspay=new JuspayNativeSDK);var initiate=null==(_window$IxigoSDKJuspa=window.IxigoSDKJuspay)||null==(_window$IxigoSDKJuspa2=_window$IxigoSDKJuspa.initiate)?void 0:_window$IxigoSDKJuspa2.bind(window.IxigoSDKJuspay),process$1=null==(_window$IxigoSDKJuspa3=window.IxigoSDKJuspay)||null==(_window$IxigoSDKJuspa4=_window$IxigoSDKJuspa3.process)?void 0:_window$IxigoSDKJuspa4.bind(window.IxigoSDKJuspay);const stringToByteArray$1=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},byteArrayToString=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))}else{const o=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const i=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0;let l=(15&a)<<2|c>>6,u=63&c;s||(u=64,o||(l=64)),n.push(r[i>>2],r[(3&i)<<4|a>>4],r[l],r[u])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(stringToByteArray$1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):byteArrayToString(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const i=r[e.charAt(t++)],o=t<e.length?r[e.charAt(t)]:0;++t;const a=t<e.length?r[e.charAt(t)]:64;++t;const s=t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==o||null==a||null==s)throw Error();n.push(i<<2|o>>4),64!==a&&(n.push(o<<4&240|a>>2),64!==s&&n.push(a<<6&192|s))}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},base64Encode=function(e){const t=stringToByteArray$1(e);return base64.encodeByteArray(t,!0)},base64urlEncodeWithoutPadding=function(e){return base64Encode(e).replace(/\./g,"")},base64Decode=function(e){try{return base64.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function isIndexedDBAvailable(){return"object"==typeof indexedDB}function validateIndexedDBOpenable(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0},getDefaultsFromCookie=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&base64Decode(e[1]);return t&&JSON.parse(t)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},getDefaultAppConfig=()=>{var e;return null===(e=getDefaults())||void 0===e?void 0:e.config};class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],o=i?replaceTemplate(i,r):"Error";return new FirebaseError(n,`${this.serviceName}: ${o} (${n}).`,r)}}function replaceTemplate(e,t){return e.replace(PATTERN,(e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const r=e[i],o=t[i];if(isObject(r)&&isObject(o)){if(!deepEqual(r,o))return!1}else if(r!==o)return!1}for(const e of n)if(!r.includes(e))return!1;return!0}function isObject(e){return null!==e&&"object"==typeof e}const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=144e5,RANDOM_FACTOR=.5;function calculateBackoffMillis(e,t=DEFAULT_INTERVAL_MILLIS,r=DEFAULT_BACKOFF_FACTOR){const n=t*Math.pow(r,e),i=Math.round(RANDOM_FACTOR*n*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,n+i)}function getModularInstance(e){return e&&e._delegate?e._delegate:e}class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const DEFAULT_ENTRY_NAME$1="[DEFAULT]";class Provider$1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function normalizeIdentifierForFactory(e){return e===DEFAULT_ENTRY_NAME$1?void 0:e}function isComponentEager(e){return"EAGER"===e.instantiationMode}class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider$1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var LogLevel;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(e,t,...r)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),i=ConsoleMethod[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${n}]  ${e.name}:`,...r)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(e,t)=>t.some(t=>e instanceof t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(wrap(e.result)),n()},o=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,e)}).catch(()=>{}),reverseTransformCache.set(t,e),t}function cacheDonePromiseForTransaction(e){if(transactionDoneMap.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),n()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});transactionDoneMap.set(e,t)}let idbProxyTraps={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return transactionDoneMap.get(e);if("objectStoreNames"===t)return e.objectStoreNames||transactionStoreNamesMap.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wrap(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?getCursorAdvanceMethods().includes(e)?function(...t){return e.apply(unwrap(this),t),wrap(cursorRequestMap.get(this))}:function(...t){return wrap(e.apply(unwrap(this),t))}:function(t,...r){const n=e.call(unwrap(this),t,...r);return transactionStoreNamesMap.set(n,t.sort?t.sort():[t]),wrap(n)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap(e){if(e instanceof IDBRequest)return promisifyRequest(e);if(transformCache.has(e))return transformCache.get(e);const t=transformCachableValue(e);return t!==e&&(transformCache.set(e,t),reverseTransformCache.set(t,e)),t}const unwrap=e=>reverseTransformCache.get(e);function openDB(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=wrap(a);return n&&a.addEventListener("upgradeneeded",e=>{n(wrap(a.result),e.oldVersion,e.newVersion,wrap(a.transaction))}),r&&a.addEventListener("blocked",()=>r()),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(cachedMethods.get(t))return cachedMethods.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=writeMethods.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!readMethods.includes(r))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&o.done]))[0]};return cachedMethods.set(t,o),o}replaceTraps(e=>({...e,get:(t,r,n)=>getMethod(t,r)||e.get(t,r,n),has:(t,r)=>!!getMethod(t,r)||e.has(t,r)}));class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(isVersionServiceProvider(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}function isVersionServiceProvider(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}const name$o="@firebase/app",version$1$1="0.8.4",logger=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$4="9.14.0",DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"},_apps=new Map,_components=new Map;function _addComponent(e,t){try{e.container.addComponent(t)}catch(r){logger.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function _registerComponent(e){const t=e.name;if(_components.has(t))return logger.debug(`There were multiple attempts to register component ${t}.`),!1;_components.set(t,e);for(const t of _apps.values())_addComponent(t,e);return!0}function _getProvider(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS);class FirebaseAppImpl{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}const SDK_VERSION=version$4;function initializeApp(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});const n=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(i)});if(r||(r=getDefaultAppConfig()),!r)throw ERROR_FACTORY$2.create("no-options");const o=_apps.get(i);if(o){if(deepEqual(r,o.options)&&deepEqual(n,o.config))return o;throw ERROR_FACTORY$2.create("duplicate-app",{appName:i})}const a=new ComponentContainer(i);for(const e of _components.values())a.addComponent(e);const s=new FirebaseAppImpl(r,n,a);return _apps.set(i,s),s}function getApp(e=DEFAULT_ENTRY_NAME){const t=_apps.get(e);if(!t&&e===DEFAULT_ENTRY_NAME)return initializeApp();if(!t)throw ERROR_FACTORY$2.create("no-app",{appName:e});return t}function registerVersion(e,t,r){var n;let i=null!==(n=PLATFORM_LOG_STRING[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void logger.warn(e.join(" "))}_registerComponent(new Component(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(STORE_NAME)}}).catch(e=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:e.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(e){var t;try{return(await getDbPromise$1()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(e))}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const r=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:null===(t=e)||void 0===t?void 0:t.message});logger.warn(r.message)}}}async function writeHeartbeatsToIndexedDB(e,t){var r;try{const r=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite"),n=r.objectStore(STORE_NAME);return await n.put(t,computeKey(e)),r.done}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const t=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:null===(r=e)||void 0===r?void 0:r.message});logger.warn(t.message)}}}function computeKey(e){return`${e.name}!${e.options.appId}`}const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=2592e6;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=getUTCDateString();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=getUTCDateString(),{heartbeatsToSend:t,unsentEntries:r}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),n=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}function extractHeartbeatsForHeader(e,t=MAX_HEADER_BYTES){const r=[];let n=e.slice();for(const i of e){const e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),countBytes(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),countBytes(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!isIndexedDBAvailable()&&validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function countBytes(e){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}function registerCoreComponents(e){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$o,version$1$1,e),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var name$2="firebase",version$3="9.14.0";registerVersion(name$2,version$3,"app");const name$1="@firebase/installations",version$2="0.5.16",PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=36e5,SERVICE="installations",SERVICE_NAME="Installations",ERROR_DESCRIPTION_MAP$1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP$1);function isServerError(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}function getInstallationsEndpoint({projectId:e}){return`${INSTALLATIONS_API_URL}/projects/${e}/installations`}function extractAuthTokenInfoFromResponse(e){return{token:e.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(e.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(e,t){const r=(await t.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function getHeaders({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(e,{refreshToken:t}){const r=getHeaders(e);return r.append("Authorization",getAuthorizationHeader(t)),r}async function retryIfServerError(e){const t=await e();return t.status>=500&&t.status<600?e():t}function getExpiresInFromResponseExpiresIn(e){return Number(e.replace("s","000"))}function getAuthorizationHeader(e){return`${INTERNAL_AUTH_VERSION} ${e}`}async function createInstallationRequest({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=getInstallationsEndpoint(e),i=getHeaders(e),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={method:"POST",headers:i,body:JSON.stringify({fid:r,authVersion:INTERNAL_AUTH_VERSION,appId:e.appId,sdkVersion:PACKAGE_VERSION})},s=await retryIfServerError(()=>fetch(n,a));if(s.ok){const e=await s.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:extractAuthTokenInfoFromResponse(e.authToken)}}throw await getErrorFromResponse("Create Installation",s)}function sleep(e){return new Promise(t=>{setTimeout(t,e)})}function bufferToBase64UrlSafe(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=encode(e);return VALID_FID_PATTERN.test(t)?t:INVALID_FID}catch(e){return INVALID_FID}}function encode(e){return bufferToBase64UrlSafe(e).substr(0,22)}function getKey(e){return`${e.appName}!${e.appId}`}const fidChangeCallbacks=new Map;function fidChanged(e,t){const r=getKey(e);callFidChangeCallbacks(r,t),broadcastFidChange(r,t)}function callFidChangeCallbacks(e,t){const r=fidChangeCallbacks.get(e);if(r)for(const e of r)e(t)}function broadcastFidChange(e,t){const r=getBroadcastChannel();r&&r.postMessage({key:e,fid:t}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=e=>{callFidChangeCallbacks(e.data.key,e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(e,t)=>{0===t&&e.createObjectStore(OBJECT_STORE_NAME)}})),dbPromise}async function set(e,t){const r=getKey(e),n=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),i=n.objectStore(OBJECT_STORE_NAME),o=await i.get(r);return await i.put(t,r),await n.done,o&&o.fid===t.fid||fidChanged(e,t.fid),t}async function remove(e){const t=getKey(e),r=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await r.objectStore(OBJECT_STORE_NAME).delete(t),await r.done}async function update(e,t){const r=getKey(e),n=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),i=n.objectStore(OBJECT_STORE_NAME),o=await i.get(r),a=t(o);return void 0===a?await i.delete(r):await i.put(a,r),await n.done,!a||o&&o.fid===a.fid||fidChanged(e,a.fid),a}async function getInstallationEntry(e){let t;const r=await update(e.appConfig,r=>{const n=updateOrCreateInstallationEntry(r),i=triggerRegistrationIfNecessary(e,n);return t=i.registrationPromise,i.installationEntry});return r.fid===INVALID_FID?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}function updateOrCreateInstallationEntry(e){return clearTimedOutRequest(e||{fid:generateFid(),registrationStatus:0})}function triggerRegistrationIfNecessary(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(ERROR_FACTORY$1.create("app-offline"))};const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:r,registrationPromise:registerInstallation(e,r)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:waitUntilFidRegistration(e)}:{installationEntry:t}}async function registerInstallation(e,t){try{const r=await createInstallationRequest(e,t);return set(e.appConfig,r)}catch(r){throw isServerError(r)&&409===r.customData.serverCode?await remove(e.appConfig):await set(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function waitUntilFidRegistration(e){let t=await updateInstallationRequest(e.appConfig);for(;1===t.registrationStatus;)await sleep(100),t=await updateInstallationRequest(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:r}=await getInstallationEntry(e);return r||t}return t}function updateInstallationRequest(e){return update(e,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(e){return hasInstallationRequestTimedOut(e)?{fid:e.fid,registrationStatus:0}:e}function hasInstallationRequestTimedOut(e){return 1===e.registrationStatus&&e.registrationTime+PENDING_TIMEOUT_MS<Date.now()}async function generateAuthTokenRequest({appConfig:e,heartbeatServiceProvider:t},r){const n=getGenerateAuthTokenEndpoint(e,r),i=getHeadersWithAuth(e,r),o=t.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:PACKAGE_VERSION,appId:e.appId}})},s=await retryIfServerError(()=>fetch(n,a));if(s.ok)return extractAuthTokenInfoFromResponse(await s.json());throw await getErrorFromResponse("Generate Auth Token",s)}function getGenerateAuthTokenEndpoint(e,{fid:t}){return`${getInstallationsEndpoint(e)}/${t}/authTokens:generate`}async function refreshAuthToken(e,t=!1){let r;const n=await update(e.appConfig,n=>{if(!isEntryRegistered(n))throw ERROR_FACTORY$1.create("not-registered");const i=n.authToken;if(!t&&isAuthTokenValid(i))return n;if(1===i.requestStatus)return r=waitUntilAuthTokenRequest(e,t),n;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const t=makeAuthTokenRequestInProgressEntry(n);return r=fetchAuthTokenFromServer(e,t),t}});return r?await r:n.authToken}async function waitUntilAuthTokenRequest(e,t){let r=await updateAuthTokenRequest(e.appConfig);for(;1===r.authToken.requestStatus;)await sleep(100),r=await updateAuthTokenRequest(e.appConfig);const n=r.authToken;return 0===n.requestStatus?refreshAuthToken(e,t):n}function updateAuthTokenRequest(e){return update(e,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");return hasAuthTokenRequestTimedOut(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fetchAuthTokenFromServer(e,t){try{const r=await generateAuthTokenRequest(e,t),n=Object.assign(Object.assign({},t),{authToken:r});return await set(e.appConfig,n),r}catch(r){if(!isServerError(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await set(e.appConfig,r)}else await remove(e.appConfig);throw r}}function isEntryRegistered(e){return void 0!==e&&2===e.registrationStatus}function isAuthTokenValid(e){return 2===e.requestStatus&&!isAuthTokenExpired(e)}function isAuthTokenExpired(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function hasAuthTokenRequestTimedOut(e){return 1===e.requestStatus&&e.requestTime+PENDING_TIMEOUT_MS<Date.now()}async function getId(e){const t=e,{installationEntry:r,registrationPromise:n}=await getInstallationEntry(t);return n?n.catch(console.error):refreshAuthToken(t).catch(console.error),r.fid}async function getToken(e,t=!1){const r=e;return await completeInstallationRegistration(r),(await refreshAuthToken(r,t)).token}async function completeInstallationRegistration(e){const{registrationPromise:t}=await getInstallationEntry(e);t&&await t}function extractAppConfig(e){if(!e||!e.options)throw getMissingValueError("App Configuration");if(!e.name)throw getMissingValueError("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!e.options[r])throw getMissingValueError(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function getMissingValueError(e){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:e})}const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:extractAppConfig(t),heartbeatServiceProvider:_getProvider(t,"heartbeat"),_delete:()=>Promise.resolve()}},internalFactory=e=>{const t=_getProvider(e.getProvider("app").getImmediate(),INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(t),getToken:e=>getToken(t,e)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations(),registerVersion(name$1,version$2),registerVersion(name$1,version$2,"esm2017");const name="@firebase/remote-config",version$1="0.3.15";class RemoteConfigAbortSignal{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}const RC_COMPONENT_NAME="remote-config",ERROR_DESCRIPTION_MAP={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},ERROR_FACTORY=new ErrorFactory("remoteconfig","Remote Config",ERROR_DESCRIPTION_MAP);function hasErrorCode(e,t){return e instanceof FirebaseError&&-1!==e.code.indexOf(t)}const DEFAULT_VALUE_FOR_BOOLEAN=!1,DEFAULT_VALUE_FOR_STRING="",DEFAULT_VALUE_FOR_NUMBER=0,BOOLEAN_TRUTHY_VALUES=["1","true","t","yes","y","on"];class Value{constructor(e,t=DEFAULT_VALUE_FOR_STRING){this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"===this._source?DEFAULT_VALUE_FOR_BOOLEAN:BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return DEFAULT_VALUE_FOR_NUMBER;let e=Number(this._value);return isNaN(e)&&(e=DEFAULT_VALUE_FOR_NUMBER),e}getSource(){return this._source}}function getRemoteConfig(e=getApp()){return _getProvider(e=getModularInstance(e),RC_COMPONENT_NAME).getImmediate()}async function activate(e){const t=getModularInstance(e),[r,n]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(r&&r.config&&r.eTag&&r.eTag!==n)&&(await Promise.all([t._storageCache.setActiveConfig(r.config),t._storage.setActiveConfigEtag(r.eTag)]),!0)}function ensureInitialized(e){const t=getModularInstance(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}async function fetchConfig(e){const t=getModularInstance(e),r=new RemoteConfigAbortSignal;setTimeout(async()=>{r.abort()},t.settings.fetchTimeoutMillis);try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:r}),await t._storageCache.setLastFetchStatus("success")}catch(e){const r=hasErrorCode(e,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(r),e}}function getValue(e,t){const r=getModularInstance(e);r._isInitializationComplete||r._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const n=r._storageCache.getActiveConfig();return n&&void 0!==n[t]?new Value("remote",n[t]):r.defaultConfig&&void 0!==r.defaultConfig[t]?new Value("default",String(r.defaultConfig[t])):(r._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new Value("static"))}class CachingClient{constructor(e,t,r,n){this.client=e,this.storage=t,this.storageCache=r,this.logger=n}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,n=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${n}.`),n}async fetch(e){const[t,r]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;const n=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===n.status&&i.push(this.storage.setLastSuccessfulFetchResponse(n)),await Promise.all(i),n}}function getUserLanguage(e=navigator){return e.languages&&e.languages[0]||e.language}class RestClient{constructor(e,t,r,n,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=n,this.apiKey=i,this.appId=o}async fetch(e){var t,r,n;const[i,o]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),a=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},c={sdk_version:this.sdkVersion,app_instance_id:i,app_instance_id_token:o,app_id:this.appId,language_code:getUserLanguage()},l={method:"POST",headers:s,body:JSON.stringify(c)},u=fetch(a,l),d=new Promise((t,r)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",r(e)})});let h;try{await Promise.race([u,d]),h=await u}catch(e){let n="fetch-client-network";throw"AbortError"===(null===(t=e)||void 0===t?void 0:t.name)&&(n="fetch-timeout"),ERROR_FACTORY.create(n,{originalErrorMessage:null===(r=e)||void 0===r?void 0:r.message})}let p=h.status;const g=h.headers.get("ETag")||void 0;let f,m;if(200===h.status){let e;try{e=await h.json()}catch(e){throw ERROR_FACTORY.create("fetch-client-parse",{originalErrorMessage:null===(n=e)||void 0===n?void 0:n.message})}f=e.entries,m=e.state}if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(f={}),304!==p&&200!==p)throw ERROR_FACTORY.create("fetch-status",{httpStatus:p});return{status:p,eTag:g,config:f}}}function setAbortableTimeout(e,t){return new Promise((r,n)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(r,i);e.addEventListener(()=>{clearTimeout(o),n(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function isRetriableError(e){if(!(e instanceof FirebaseError&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class RetryingClient{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){await setAbortableTimeout(e.signal,t);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(t){if(!isRetriableError(t))throw t;const n={throttleEndTimeMillis:Date.now()+calculateBackoffMillis(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(n),this.attemptFetch(e,n)}}}const DEFAULT_FETCH_TIMEOUT_MILLIS=6e4,DEFAULT_CACHE_MAX_AGE_MILLIS=432e5;class RemoteConfig{constructor(e,t,r,n,i){this.app=e,this._client=t,this._storageCache=r,this._storage=n,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:DEFAULT_FETCH_TIMEOUT_MILLIS,minimumFetchIntervalMillis:DEFAULT_CACHE_MAX_AGE_MILLIS},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function toFirebaseError(e,t){var r;const n=e.target.error||void 0;return ERROR_FACTORY.create(t,{originalErrorMessage:n&&(null===(r=n)||void 0===r?void 0:r.message)})}const APP_NAMESPACE_STORE="app_namespace_store",DB_NAME="firebase_remote_config",DB_VERSION=1;function openDatabase(){return new Promise((e,t)=>{var r;try{const r=indexedDB.open(DB_NAME,DB_VERSION);r.onerror=e=>{t(toFirebaseError(e,"storage-open"))},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{0===e.oldVersion&&e.target.result.createObjectStore(APP_NAMESPACE_STORE,{keyPath:"compositeKey"})}}catch(e){t(ERROR_FACTORY.create("storage-open",{originalErrorMessage:null===(r=e)||void 0===r?void 0:r.message}))}})}class Storage{constructor(e,t,r,n=openDatabase()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=n}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const t=await this.openDbPromise;return new Promise((r,n)=>{var i;const o=t.transaction([APP_NAMESPACE_STORE],"readonly").objectStore(APP_NAMESPACE_STORE),a=this.createCompositeKey(e);try{const e=o.get(a);e.onerror=e=>{n(toFirebaseError(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(e){n(ERROR_FACTORY.create("storage-get",{originalErrorMessage:null===(i=e)||void 0===i?void 0:i.message}))}})}async set(e,t){const r=await this.openDbPromise;return new Promise((n,i)=>{var o;const a=r.transaction([APP_NAMESPACE_STORE],"readwrite").objectStore(APP_NAMESPACE_STORE),s=this.createCompositeKey(e);try{const e=a.put({compositeKey:s,value:t});e.onerror=e=>{i(toFirebaseError(e,"storage-set"))},e.onsuccess=()=>{n()}}catch(e){i(ERROR_FACTORY.create("storage-set",{originalErrorMessage:null===(o=e)||void 0===o?void 0:o.message}))}})}async delete(e){const t=await this.openDbPromise;return new Promise((r,n)=>{var i;const o=t.transaction([APP_NAMESPACE_STORE],"readwrite").objectStore(APP_NAMESPACE_STORE),a=this.createCompositeKey(e);try{const e=o.delete(a);e.onerror=e=>{n(toFirebaseError(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(e){n(ERROR_FACTORY.create("storage-delete",{originalErrorMessage:null===(i=e)||void 0===i?void 0:i.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class StorageCache{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),n=await e;n&&(this.lastFetchStatus=n);const i=await t;i&&(this.lastSuccessfulFetchTimestampMillis=i);const o=await r;o&&(this.activeConfig=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function registerRemoteConfig(){_registerComponent(new Component(RC_COMPONENT_NAME,function(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw ERROR_FACTORY.create("registration-window");if(!isIndexedDBAvailable())throw ERROR_FACTORY.create("indexed-db-unavailable");const{projectId:i,apiKey:o,appId:a}=r.options;if(!i)throw ERROR_FACTORY.create("registration-project-id");if(!o)throw ERROR_FACTORY.create("registration-api-key");if(!a)throw ERROR_FACTORY.create("registration-app-id");const s=new Storage(a,r.name,t=t||"firebase"),c=new StorageCache(s),l=new Logger(name);l.logLevel=LogLevel.ERROR;const u=new RestClient(n,SDK_VERSION,t,i,o,a),d=new RetryingClient(u,s),h=new CachingClient(d,s,c,l),p=new RemoteConfig(r,h,c,s,l);return ensureInitialized(p),p},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version$1),registerVersion(name,version$1,"esm2017")}async function fetchAndActivate(e){return e=getModularInstance(e),await fetchConfig(e),activate(e)}registerRemoteConfig();var firebaseFetchIntervalMilliseconds=3e3,processCardTransaction=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.process)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.process(JSON.stringify(e),t,r)})},n=function(){if(isAvailable())return Promise.resolve(process$1(_extends({},e))).then(function(e){return t=1,e})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},openUPIApp=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n,i,o,a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.payment;if(a)a.postMessage({action:"openApp",params:{success:t,error:r,data:e.deeplink}});else{if(null==(o=window.PaymentSDKAndroid)||!o.launchUPIApp)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.launchUPIApp(JSON.stringify(e),t,r)}}))}catch(e){return Promise.reject(e)}},getUPIDirectApps=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n,i,o,a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.payment;if(a)a.postMessage({action:"getApps",params:{success:t,error:r,data:e.appsList}});else{if(null==(o=window.PaymentSDKAndroid)||!o.getUPIDirectApps)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.getUPIDirectApps(t,r)}}))}catch(e){return Promise.reject(e)}},customPayUsingPSDK=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.process)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.process(JSON.stringify(e),t,r)})},n=function(){if(isAvailable())return Promise.resolve(process$1(_extends({},e))).then(function(e){return t=1,e})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},getFirebaseRemoteConfig=function(e,t){try{return Promise.resolve(new Promise(function(r,n){var i=getRemoteConfig(initializeApp(e));i.settings.minimumFetchIntervalMillis=firebaseFetchIntervalMilliseconds,fetchAndActivate(i).then(function(){var e=getValue(i,t);r({config:e})}).catch(function(e){n(e)})}))}catch(e){return Promise.reject(e)}},initializeMinkasuSDK=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n,i,o,a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.payment;if(a)a.postMessage({action:"initializeMinkasuSDK",params:e});else{if(null==(o=window.PaymentSDKAndroid)||!o.initializeMinkasuSDK)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.initializeMinkasuSDK(JSON.stringify(e),t,r)}}))}catch(e){return Promise.reject(e)}},scanCreditCard=function(){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(e,t){var r,n,i,o=null==(r=window.PaymentSDKAndroid)?void 0:r.scanCreditCard;if(o)o(e,t);else{var a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.ixigoSDK;if(!a)throw{errorCode:"NotAvailableError"};a.postMessage({action:"scanCreditCard",params:{success:e,error:t,data:{}}})}}))}catch(e){return Promise.reject(e)}},processCredPayment=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.processCredPayment)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.processCredPayment(JSON.stringify(e),t,r)})},n=function(){if("JUSPAY"==e.provider&&isAvailable())return Promise.resolve(process$1({action:"appPayTxn",orderId:e.orderId,paymentMethod:"CRED",amount:e.amount,application:"CRED",clientAuthToken:e.clientAuthToken,walletMobileNumber:e.customerMobile})).then(function(){return t=1,{orderId:e.orderId}})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},checkCredEligibility=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n,i,o,a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.payment;if(a)a.postMessage({action:"credIntentEligibility",params:{success:t,error:r,data:{}}});else{if(null==(o=window.PaymentSDKAndroid)||!o.checkCredEligibility)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.checkCredEligibility(JSON.stringify(e),t,r)}}))}catch(e){return Promise.reject(e)}},finishPayment=function(e){try{var t,r,n;if(null!=(t=window.PaymentSDKAndroid)&&t.finishPayment)return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){window.PaymentSDKAndroid.finishPayment(JSON.stringify(e),t,r)}));var i=null==(r=window.webkit)||null==(n=r.messageHandlers)?void 0:n.payment;return i?Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){i.postMessage({action:"finishPayment",params:e})})):(location.replace(e.nextUrl),Promise.resolve({handler:FinishPaymentHandler.browser}))}catch(e){return Promise.reject(e)}},processUPIIntent=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.processUPIIntent)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.processUPIIntent(JSON.stringify(e),t,r)})},n=function(){var r;if("JUSPAY"==e.provider&&isAvailable())return Promise.resolve(process$1(_extends({environment:"prod",action:"upiTxn",upiSdkPresent:!0,payWithApp:e.appPackage},e,{amount:null==e||null==(r=e.amount)?void 0:r.toString()}))).then(function(e){return t=1,e})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},getSimplFingerprint=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n,i,o,a=null==(n=window.webkit)||null==(i=n.messageHandlers)?void 0:i.payment;if(a)a.postMessage({action:"getSimplFingerprint",params:{success:t,error:r,data:e}});else{if(null==(o=window.PaymentSDKAndroid)||!o.getSimplFingerprint)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.getSimplFingerprint(JSON.stringify(e),t,r)}}))}catch(e){return Promise.reject(e)}},getPhonePeRedirectData=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.getPhonePeRedirectData)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.getPhonePeRedirectData(JSON.stringify(e),t,r)}))}catch(e){return Promise.reject(e)}},getPhonePeVersionCode=function(){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(e,t){var r;if(null==(r=window.PaymentSDKAndroid)||!r.getPhonePeVersionCode)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.getPhonePeVersionCode(e,t)}))}catch(e){return Promise.reject(e)}},isPhonePeUpiAvailable=function(){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(e,t){var r;if(null==(r=window.PaymentSDKAndroid)||!r.isPhonePeUpiAvailable)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.isPhonePeUpiAvailable(e,t)}))}catch(e){return Promise.reject(e)}},requestGpayPayment=function(e){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.requestGpayPayment)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.requestGpayPayment(JSON.stringify(e),t,r)}))}catch(e){return Promise.reject(e)}},isGpayUpiAvailable=function(){try{return Promise.resolve(window.PromiseNativeBridge.putPromise(function(e,t){var r;if(null==(r=window.PaymentSDKAndroid)||!r.isGpayUpiAvailable)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.isGpayUpiAvailable(e,t)}))}catch(e){return Promise.reject(e)}},getAvailableUPIApps=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n;if(null==(n=window.PaymentSDKAndroid)||!n.getAvailableUPIApps)throw{errorCode:"NotAvailableError"};window.PaymentSDKAndroid.getAvailableUPIApps(JSON.stringify(e),t,r)})},n=function(){if("JUSPAY"==e.provider&&isAvailable())return Promise.resolve(process$1({getAvailableApps:!0,orderId:e.orderId,environment:"prod",action:"upiTxn"})).then(function(e){return t=1,{apps:e.payload.availableApps}})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},initialize=function(e){try{var t,r=function(r){return t?r:window.PromiseNativeBridge.putPromise(function(t,r){var n,i;if(null==(n=window.PaymentSDKAndroid)||!n.initialize)throw{errorCode:"NotAvailableError"};null==(i=window.PaymentSDKAndroid)||i.initialize(JSON.stringify(e),t,r)})},n=function(){if("JUSPAY"==e.provider&&isAvailable())return Promise.resolve(initiate({merchantId:e.merchantId,clientId:e.clientId,customerId:e.customerId,merchantLoader:!0,environment:(null==e?void 0:e.environment)||"prod",action:"initiate"})).then(function(e){return t=1,e})}();return Promise.resolve(n&&n.then?n.then(r):r(n))}catch(e){return Promise.reject(e)}},Provider,FinishPaymentHandler;!function(e){e.Juspay="JUSPAY"}(Provider||(Provider={})),function(e){e.browser="browser",e.native="native"}(FinishPaymentHandler||(FinishPaymentHandler={}));var index$2={__proto__:null,processCardTransaction:processCardTransaction,openUPIApp:openUPIApp,getUPIDirectApps:getUPIDirectApps,customPayUsingPSDK:customPayUsingPSDK,getFirebaseRemoteConfig:getFirebaseRemoteConfig,initializeMinkasuSDK:initializeMinkasuSDK,scanCreditCard:scanCreditCard,processCredPayment:processCredPayment,checkCredEligibility:checkCredEligibility,finishPayment:finishPayment,processUPIIntent:processUPIIntent,getSimplFingerprint:getSimplFingerprint,getPhonePeRedirectData:getPhonePeRedirectData,getPhonePeVersionCode:getPhonePeVersionCode,isPhonePeUpiAvailable:isPhonePeUpiAvailable,requestGpayPayment:requestGpayPayment,isGpayUpiAvailable:isGpayUpiAvailable,getAvailableUPIApps:getAvailableUPIApps,initialize:initialize,get Provider(){return Provider},get FinishPaymentHandler(){return FinishPaymentHandler}};function launchAdditionalTrips(){var e,t,r;if(null==(e=window.IxigoSDKAndroid)?void 0:e.openAdditionalBusTrips)return window.IxigoSDKAndroid.openAdditionalBusTrips();var n=null==(t=window.webkit)||null==(r=t.messageHandlers)?void 0:r.busSDK;return!!n&&(n.postMessage("openAdditionalBusTrips"),!0)}function launchHome(e){var t=clientIdToSource(e.clientId);return window.open("https://www.abhibus.com/ixigopwa/?source="+t,"_blank"),!0}function launchTrips(e){var t=clientIdToSource(e.clientId);return window.open("https://www.abhibus.com/ixigopwa/trips?source="+t,"_blank"),!0}function clientIdToSource(e){switch(e){case"iximaio":case"iximaad":return"ixflights";case"ixitrio":case"iximatr":return"ixtrains";default:return e}}var index$1={__proto__:null,launchAdditionalTrips:launchAdditionalTrips,launchHome:launchHome,launchTrips:launchTrips},configure=function(e){try{return Promise.resolve(PromiseNativeBridge.putPromise(function(t,r){var n,i,o;if(backNavigationHandler="handler"==e.backNavigationMode.type?e.backNavigationMode.handleBackPress:void 0,null==(n=window.IxigoSDKAndroid)?void 0:n.configureUI)window.IxigoSDKAndroid.configureUI(JSON.stringify(e),t,r);else{var a=null==(i=window.webkit)||null==(o=i.messageHandlers)?void 0:o.ixigoSDK;if(!a)throw{errorCode:"NotAvailableError"};a.postMessage({action:"configureUI",params:{success:t,error:r,data:JSON.parse(JSON.stringify(e))}})}}))}catch(e){return Promise.reject(e)}},backNavigationHandler;function handleBackNavigation(){return!!backNavigationHandler&&(backNavigationHandler(),!0)}function testResetBackNavigationHandler(){backNavigationHandler=void 0}var index={__proto__:null,configure:configure,handleBackNavigation:handleBackNavigation,testResetBackNavigationHandler:testResetBackNavigationHandler};function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var basicLightbox_min=createCommonjsModule(function(e,t){e.exports=function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof commonjsRequire&&commonjsRequire;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof commonjsRequire&&commonjsRequire,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.create=r.visible=void 0;var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("div");return r.innerHTML=e.trim(),!0===t?r.children:r.firstChild},i=function(e,t){var r=e.children;return 1===r.length&&r[0].tagName===t},o=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};r.visible=o,r.create=function(e,t){var r=function(e,t){var r=n('\n\t\t<div class="basicLightbox '.concat(t.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),o=r.querySelector(".basicLightbox__placeholder");e.forEach(function(e){return o.appendChild(e)});var a=i(o,"IMG"),s=i(o,"VIDEO"),c=i(o,"IFRAME");return!0===a&&r.classList.add("basicLightbox--img"),!0===s&&r.classList.add("basicLightbox--video"),!0===c&&r.classList.add("basicLightbox--iframe"),r}(e=function(e){var t="string"==typeof e,r=e instanceof HTMLElement==1;if(!1===t&&!1===r)throw new Error("Content must be a DOM element/node or string");return!0===t?Array.from(n(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(t)),a=function(e){return!1!==t.onClose(s)&&function(e,t){return e.classList.remove("basicLightbox--visible"),setTimeout(function(){return!1===o(e)||e.parentElement.removeChild(e),t()},410),!0}(r,function(){if("function"==typeof e)return e(s)})};!0===t.closable&&r.addEventListener("click",function(e){e.target===r&&a()});var s={element:function(){return r},visible:function(){return o(r)},show:function(e){return!1!==t.onShow(s)&&function(e,t){return document.body.appendChild(e),setTimeout(function(){requestAnimationFrame(function(){return e.classList.add("basicLightbox--visible"),t()})},10),!0}(r,function(){if("function"==typeof e)return e(s)})},close:a};return s}},{}]},{},[1])(1)}),fetchPartnerTokenWeb=function(e){try{return Promise.resolve(new Promise(function(t,r){var n=getQueryObjectFromUrl(window.parent.location.search).cbt,i=void 0===n?"":n,o=getBaseUrl(e.baseUrl),a=basicLightbox_min.create('\n      <style>\n        #sso-frame {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          height: 100%;\n          width: 100%;\n        }\n        @media screen and (min-width: 1280px) {\n          #sso-frame {\n            height: 85%;\n            width: 30%;\n            border: 1px solid #e5e5e5;\n            border-radius: 5px;\n          }\n        }\n      </style>\n      <iframe id="sso-frame" src="'+o+"/sso-login?partnerId="+e.partnerId+"&cbt="+i+'" frameborder="0"></iframe>\n    ',{closable:!1});window.addEventListener("message",function(e){e.data.success?(a.close(),t(e.data.payload)):!1===e.data.success&&(a.close(),t(e.data.error))},!1),a.show()}))}catch(e){return Promise.reject(e)}},fetchPartnerToken=function(e){try{return hasNativeFetchPartnerToken()?Promise.resolve(PromiseNativeBridge.putPromise(function(t,r){try{var n,i,o;if(null!=(n=window.IxigoSDKAndroid)&&n.fetchPartnerToken)return window.IxigoSDKAndroid.fetchPartnerToken(JSON.stringify(e),t,r),Promise.resolve();var a=null==(i=window.webkit)||null==(o=i.messageHandlers)?void 0:o.ixigoSDK;return a?(a.postMessage({action:"fetchPartnerToken",params:{success:t,error:r,data:e}}),Promise.resolve()):Promise.resolve()}catch(e){return Promise.reject(e)}})):fetchPartnerTokenWeb(e)}catch(e){return Promise.reject(e)}};function getQueryObjectFromUrl(e){return void 0===e&&(e=""),decodeURIComponent(e).replace("?","").split("&").reduce(function(e,t){var r,n=t.split("=");return _extends({},e,((r={})[n[0]]=n[1],r))},{})}function hasNativeFetchPartnerToken(){var e,t,r,n=Boolean(null==(e=window.IxigoSDKAndroid)?void 0:e.fetchPartnerToken),i=Boolean(null==(t=window.webkit)||null==(r=t.messageHandlers)?void 0:r.ixigoSDK);return n||i}function getBaseUrl(e){return/^.*\.ixigo\.com$/.test(e)?e:"https://www.ixigo.com"}var version="0.0.62";exports.bus=index$1,exports.ctEvent=ctEvent,exports.fetchPartnerToken=fetchPartnerToken,exports.logEvent=logEvent,exports.openWindow=openWindow,exports.payment=index$2,exports.processNativePayment=processNativePayment,exports.quit=quit,exports.readSms=readSms,exports.ui=index,exports.version=version});
//# sourceMappingURL=index.umd.js.map
